# /speckit.constitution 指令最佳实践

## 指令概述

`/speckit.constitution` 用于定义项目的核心规范、原则和约束条件。这个指令帮助建立项目的"宪法"，为后续的开发工作提供指导原则。

## 使用场景

- 项目初始化时定义核心原则
- 建立代码规范和架构约束
- 定义团队协作准则
- 设置质量标准和安全要求

## 最佳实践

### 1. 项目启动时使用

在项目开始时，使用此指令建立项目基础：

```
@github/copilot /speckit.constitution 我正在开发一个电商网站，需要定义项目的核心原则：
- 使用 React + TypeScript
- 遵循 RESTful API 设计
- 确保移动端友好
- 注重性能优化
- 实施严格的数据验证
```

### 2. 技术栈定义

明确技术选型和架构原则：

```
@github/copilot /speckit.constitution 为微服务架构项目定义技术宪法：
- 后端：Node.js + Express + MongoDB
- 容器化：Docker + Kubernetes
- 通信：gRPC 内部通信，REST 对外接口
- 监控：Prometheus + Grafana
- 日志：ELK Stack
- 测试覆盖率不低于 80%
```

### 3. 代码质量标准

建立代码质量和开发规范：

```
@github/copilot /speckit.constitution 定义代码质量宪法：
- 使用 ESLint + Prettier 统一代码风格
- 所有函数必须有 JSDoc 注释
- 单元测试覆盖率 ≥ 85%
- 代码复杂度不超过 10
- 每个 PR 必须经过 Code Review
- 使用 Conventional Commits 规范提交信息
```

## 真实案例示例

### 案例 1：金融科技项目宪法

**场景**：开发一个在线支付系统

**输入**：

```
@github/copilot /speckit.constitution 为在线支付系统建立项目宪法：
- 安全性是最高优先级
- 遵循 PCI DSS 标准
- 所有API必须使用HTTPS和JWT认证
- 敏感数据必须加密存储
- 支持高并发（10万TPS）
- 系统可用性99.9%
- 支持多种支付方式
- 符合各国金融监管要求
```

**输出示例**：

```markdown
# 在线支付系统项目宪法

## 核心原则

1. **安全至上**：所有设计决策必须优先考虑安全性
2. **合规优先**：严格遵循 PCI DSS 和各国金融法规
3. **高可用性**：系统设计必须确保 99.9% 的可用性
4. **性能保障**：支持 10 万 TPS 的并发处理能力

## 技术约束

- 所有通信必须使用 HTTPS/TLS 1.3
- API 认证采用 JWT + OAuth 2.0
- 敏感数据使用 AES-256 加密
- 数据库采用读写分离和分片架构
- 实施多层防火墙和 DDoS 防护

## 开发规范

- 代码必须通过安全扫描工具检查
- 每个功能模块必须有独立的测试环境
- 所有变更必须经过安全团队审核
- 实施 CI/CD 自动化部署流程
```

### 案例 2：教育平台项目宪法

**场景**：开发在线学习管理系统

**输入**：

```
@github/copilot /speckit.constitution 为在线教育平台定义项目宪法：
- 用户体验优先
- 支持多设备访问
- 内容管理灵活
- 支持多语言
- 可扩展架构
- 数据隐私保护
- 无障碍访问支持
```

**输出示例**：

```markdown
# 在线教育平台项目宪法

## 设计原则

1. **用户中心**：所有功能设计以用户体验为核心
2. **多设备适配**：确保在手机、平板、PC 上的一致体验
3. **内容为王**：提供灵活的内容创建和管理工具
4. **包容性设计**：支持无障碍访问和多语言

## 技术架构

- 前端：React + TypeScript + Responsive Design
- 后端：Node.js + GraphQL + PostgreSQL
- 存储：AWS S3 用于媒体文件存储
- CDN：CloudFront 全球内容分发
- 实时通信：WebSocket + Redis

## 质量标准

- 页面加载时间 < 3 秒
- 移动端性能分数 > 90
- 支持 WCAG 2.1 AA 级无障碍标准
- 多语言支持（中英日韩）
```

## 输出格式说明

constitution 指令通常会生成：

1. **项目概述**：简述项目目标和愿景
2. **核心原则**：3-5 个指导性原则
3. **技术约束**：技术选型和架构限制
4. **质量标准**：性能、安全、可用性要求
5. **开发规范**：代码规范和流程要求
6. **合规要求**：法律法规和行业标准

## 注意事项

1. **具体明确**：避免模糊的表述，要给出具体的标准和数值
2. **可衡量**：所有标准都应该是可量化和可验证的
3. **技术栈明确**：清楚指定使用的技术和工具
4. **优先级清晰**：明确哪些原则是不可妥协的
5. **团队共识**：确保所有团队成员理解并同意这些原则

## 后续步骤

定义完 constitution 后，可以使用其他 spec-kit 指令：

- 使用 `/speckit.specify` 基于宪法创建具体功能规范
- 使用 `/speckit.plan` 制定符合宪法的实施计划
- 使用 `/speckit.tasks` 分解具体任务
